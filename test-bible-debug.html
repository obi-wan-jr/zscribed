<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Bible Debug Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="h-full bg-[#0b1020] text-slate-200">
    <div class="min-h-full">
        <main class="max-w-4xl mx-auto p-6 space-y-8">
            <section class="bg-[#121733] border border-slate-700 rounded-lg p-6">
                <h2 class="text-xl font-semibold text-indigo-200 mb-6">Bible Audio Creation Debug</h2>
                
                <!-- Simple Content Selection -->
                <div class="border border-slate-600 rounded-lg p-6 bg-[#0a0f1a]">
                    <h3 class="text-lg font-medium text-indigo-300 mb-4">What to transcribe?</h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <!-- Option 1: Entire Book -->
                        <label class="relative p-4 border-2 border-slate-600 rounded-lg bg-[#121733] hover:bg-[#1a1f3a] cursor-pointer transition-all duration-200" id="bookOption">
                            <input type="radio" name="transcribeMode" value="book" class="sr-only">
                            <div class="text-center">
                                <div class="w-8 h-8 mx-auto mb-2 rounded-full border-2 border-slate-400 flex items-center justify-center">
                                    <div class="w-3 h-3 rounded-full bg-transparent transition-colors duration-200"></div>
                                </div>
                                <h4 class="font-medium text-white">Entire Book</h4>
                                <p class="text-sm text-slate-400">Complete book</p>
                            </div>
                        </label>

                        <!-- Option 2: Specific Chapter -->
                        <label class="relative p-4 border-2 border-slate-600 rounded-lg bg-[#121733] hover:bg-[#1a1f3a] cursor-pointer transition-all duration-200" id="chapterOption">
                            <input type="radio" name="transcribeMode" value="chapter" class="sr-only">
                            <div class="text-center">
                                <div class="w-8 h-8 mx-auto mb-2 rounded-full border-2 border-slate-400 flex items-center justify-center">
                                    <div class="w-3 h-3 rounded-full bg-transparent transition-colors duration-200"></div>
                                </div>
                                <h4 class="font-medium text-white">Specific Chapter</h4>
                                <p class="text-sm text-slate-400">Single chapter + verses</p>
                            </div>
                        </label>

                        <!-- Option 3: Multiple Chapters -->
                        <label class="relative p-4 border-2 border-slate-600 rounded-lg bg-[#121733] hover:bg-[#1a1f3a] cursor-pointer transition-all duration-200" id="chaptersOption">
                            <input type="radio" name="transcribeMode" value="chapters" class="sr-only">
                            <div class="text-center">
                                <div class="w-8 h-8 mx-auto mb-2 rounded-full border-2 border-slate-400 flex items-center justify-center">
                                    <div class="w-3 h-3 rounded-full bg-transparent transition-colors duration-200"></div>
                                </div>
                                <h4 class="font-medium text-white">Multiple Chapters</h4>
                                <p class="text-sm text-slate-400">Chapter ranges</p>
                            </div>
                        </label>
                    </div>

                    <!-- Debug Output -->
                    <div class="mt-6 p-4 border border-slate-600 rounded-lg bg-[#0b1020]">
                        <h4 class="font-medium text-indigo-300 mb-2">Debug Information:</h4>
                        <div id="debugOutput" class="text-sm text-slate-300"></div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script>
        let currentMode = null;

        function selectMode(mode) {
            console.log('selectMode called with mode:', mode);
            currentMode = mode;
            
            // Reset all visual states
            const optionElements = document.querySelectorAll('[id$="Option"]');
            console.log('Found option elements:', optionElements.length);
            optionElements.forEach((option, index) => {
                console.log(`Option ${index}:`, option.id, option);
                if (option && option.classList) {
                    // Reset border and background
                    option.classList.remove('border-indigo-500', 'bg-indigo-900/20');
                    option.classList.add('border-slate-600');
                    
                    // Reset radio indicator
                    const radioIndicator = option.querySelector('.w-3.h-3');
                    if (radioIndicator) {
                        radioIndicator.classList.remove('bg-indigo-500');
                        radioIndicator.classList.add('bg-transparent');
                    }
                    
                    // Reset border color of radio circle
                    const radioCircle = option.querySelector('.w-8.h-8');
                    if (radioCircle) {
                        radioCircle.classList.remove('border-indigo-500');
                        radioCircle.classList.add('border-slate-400');
                    }
                }
            });
            
            // Update selected option
            let selectedOption;
            if (mode === 'book') {
                selectedOption = document.getElementById('bookOption');
            } else if (mode === 'chapter') {
                selectedOption = document.getElementById('chapterOption');
            } else if (mode === 'chapters') {
                selectedOption = document.getElementById('chaptersOption');
            }
            
            console.log('Selected option for mode', mode, ':', selectedOption?.id);
            
            if (selectedOption) {
                // Set selected visual state
                selectedOption.classList.add('border-indigo-500', 'bg-indigo-900/20');
                selectedOption.classList.remove('border-slate-600');
                
                // Update radio indicator
                const selectedRadioIndicator = selectedOption.querySelector('.w-3.h-3');
                if (selectedRadioIndicator) {
                    selectedRadioIndicator.classList.add('bg-indigo-500');
                    selectedRadioIndicator.classList.remove('bg-transparent');
                }
                
                // Update border color of radio circle
                const selectedRadioCircle = selectedOption.querySelector('.w-8.h-8');
                if (selectedRadioCircle) {
                    selectedRadioCircle.classList.add('border-indigo-500');
                    selectedRadioCircle.classList.remove('border-slate-400');
                }
            }
            
            // Update debug output
            updateDebugOutput();
        }

        function updateDebugOutput() {
            const debugOutput = document.getElementById('debugOutput');
            const optionElements = document.querySelectorAll('[id$="Option"]');
            
            let debugInfo = `
                <p><strong>Current Mode:</strong> ${currentMode || 'none'}</p>
                <p><strong>All Options Found:</strong> ${Array.from(optionElements).map(el => el.id).join(', ')}</p>
                <br>
            `;
            
            optionElements.forEach((option, index) => {
                const hasSelectedBorder = option.classList.contains('border-indigo-500');
                const hasSelectedBg = option.classList.contains('bg-indigo-900/20');
                const radioIndicator = option.querySelector('.w-3.h-3');
                const radioCircle = option.querySelector('.w-8.h-8');
                
                debugInfo += `
                    <p><strong>${option.id}:</strong></p>
                    <ul class="ml-4">
                        <li>Border indigo: ${hasSelectedBorder}</li>
                        <li>Background indigo: ${hasSelectedBg}</li>
                        <li>Radio indicator exists: ${radioIndicator ? 'yes' : 'no'}</li>
                        <li>Radio circle exists: ${radioCircle ? 'yes' : 'no'}</li>
                        <li>Radio indicator has bg-indigo-500: ${radioIndicator ? radioIndicator.classList.contains('bg-indigo-500') : 'N/A'}</li>
                        <li>Radio circle has border-indigo-500: ${radioCircle ? radioCircle.classList.contains('border-indigo-500') : 'N/A'}</li>
                    </ul>
                `;
            });
            
            debugOutput.innerHTML = debugInfo;
        }

        // Radio button listeners
        const radioButtons = document.querySelectorAll('input[name="transcribeMode"]');
        console.log('Found radio buttons:', radioButtons.length);
        
        radioButtons.forEach((radio, index) => {
            console.log(`Radio button ${index}:`, radio.value, radio);
            radio.addEventListener('change', (e) => {
                if (e.target.checked) {
                    console.log('Radio changed to:', e.target.value);
                    selectMode(e.target.value);
                }
            });
        });

        // Initial debug output
        updateDebugOutput();
    </script>
</body>
</html>
